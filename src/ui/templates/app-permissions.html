<h1>App Permissions</h1>

<div class="card">
  <p class="text-muted mb-1">
    Manage which Solid apps can write to your pod and which containers they can access.
  </p>
</div>

{{#hasApps}}
{{#apps}}
<div class="card">
  <h2 class="mb-025">{{clientName}}</h2>
  <div class="mono text-muted text-sm break-all mb-05">{{clientId}}</div>
  <div class="text-muted text-sm mb-075">Authorized: {{grantedAt}}</div>

  {{#hasContainers}}
  <div class="mb-075">
    <strong class="text-md">Allowed containers:</strong>
    <ul class="list-indented">
      {{#containers}}
      <li class="mono text-sm">{{path}}</li>
      {{/containers}}
    </ul>
  </div>
  {{/hasContainers}}
  {{^hasContainers}}
  <div class="text-muted mb-075 text-md">No write access granted.</div>
  {{/hasContainers}}

  <details class="mb-075">
    <summary class="cursor-pointer text-sm">Update container access</summary>
    <form method="POST" action="/app-permissions" class="mt-05">
      <input type="hidden" name="action" value="update">
      <input type="hidden" name="client_id" value="{{clientId}}">
      <div class="checkbox-panel mb-05">
        {{#allContainers}}
        <label class="container-label">
          <input type="checkbox" name="containers" value="{{iri}}">
          <span class="mono">{{path}}</span>
        </label>
        {{/allContainers}}
      </div>
      <button type="submit" class="btn">Update Access</button>
    </form>
  </details>

  <form method="POST" action="/app-permissions" class="inline-form">
    <input type="hidden" name="action" value="revoke">
    <input type="hidden" name="client_id" value="{{clientId}}">
    <button type="submit" class="btn btn-secondary text-danger">Revoke Access</button>
  </form>
</div>
{{/apps}}
{{/hasApps}}

{{^hasApps}}
<div class="card">
  <div class="text-muted">No apps have been authorized yet.</div>
</div>
{{/hasApps}}
