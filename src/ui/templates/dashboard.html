<h1>Dashboard</h1>

<div class="card">
  <h2>Profile</h2>
  <table>
    <tr><td>Username</td><td class="mono">{{username}}</td></tr>
    <tr><td>WebID</td><td class="mono"><a href="{{ webId }}">{{webId}}</a></td></tr>
    <tr><td>Actor</td><td class="mono"><a href="{{ actorId }}">{{actorId}}</a></td></tr>
    <tr><td>Domain</td><td class="mono">{{domain}}</td></tr>
  </table>
</div>

<!-- <div class="card">
  <h2>Quick Links</h2>
  <div class="flex gap-05 flex-wrap">
    <a href="/activity" class="btn">Activity Feed</a>
    <a href="/storage/" class="btn btn-secondary">File Storage</a>
    <a href="/.well-known/webfinger?resource=acct:{{{webfingerParam}}}" class="btn btn-secondary">WebFinger</a>
  </div>
</div> -->

<div class="stats-grid">
  <div class="card">
    <div class="text-muted">Followers</div>
    <div class="stat-number">{{followerCount}}</div>
  </div>
  <div class="card">
    <div class="text-muted">Following</div>
    <div class="stat-number">{{followingCount}}</div>
  </div>
  <div class="card">
    <div class="text-muted">Posts</div>
    <div class="stat-number">{{postCount}}</div>
  </div>
</div>

{{#hasPendingFollows}}
<div class="card card-warning">
  <div class="flex justify-between items-center">
    <div>
      <strong>{{pendingFollowCount}}</strong> pending follow request{{#pendingFollowCountPlural}}s{{/pendingFollowCountPlural}}
    </div>
    <a href="/activity" class="btn btn-narrow">Review</a>
  </div>
</div>
{{/hasPendingFollows}}


<div class="card">
  <h2>Storage - {{{storageUsed}}} used</h2>
  <p class="text-muted mb-075">{{totalResources}} resource{{#totalResourcesPlural}}s{{/totalResourcesPlural}} across all containers</p>
  {{#hasBreakdown}}
  <table>
    <thead><tr><th>Category</th><th class="text-right">Size</th><th class="text-right">Files</th></tr></thead>
    <tbody>
      {{#storageBreakdown}}
      <tr>
        <td>{{name}}</td>
        <td class="mono text-right">{{size}}</td>
        <td class="text-muted text-right">{{label}}</td>
      </tr>
      {{/storageBreakdown}}
    </tbody>
  </table>
  {{/hasBreakdown}}
</div>

<div class="card">
  <h2>Passkeys</h2>
  {{#hasPasskeys}}
  <table>
    <thead>
      <tr><th>Name</th><th>Created</th><th>Actions</th></tr>
    </thead>
    <tbody>
      {{#passkeys}}
      <tr>
        <td>
          <form method="POST" action="/webauthn/rename" class="inline-flex gap-025 items-center">
            <input type="hidden" name="credId" value="{{id}}">
            <input type="text" name="name" value="{{name}}" class="input-name">
            <button type="submit" class="btn btn-secondary btn-sm">Rename</button>
          </form>
        </td>
        <td class="text-muted">{{createdAt}}</td>
        <td>
          <form method="POST" action="/webauthn/delete">
            <input type="hidden" name="credId" value="{{id}}">
            <button type="submit" class="btn btn-secondary btn-sm" data-confirm="Delete this passkey?">Delete</button>
          </form>
        </td>
      </tr>
      {{/passkeys}}
    </tbody>
  </table>
  {{/hasPasskeys}}
  {{^hasPasskeys}}
  <p class="text-muted">No passkeys registered.</p>
  {{/hasPasskeys}}
  <div id="passkey-section" class="mt-075">
    <button class="btn btn-secondary" onclick="beginRegisterPasskey()">Register Passkey</button>
    <div id="passkey-status" class="mt-05"></div>
  </div>
  <script src="/scripts/webauthn-utils.js"></script>
  <script src="/scripts/passkey-register.js"></script>
</div>
